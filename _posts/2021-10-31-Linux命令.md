---
layout: post
title: 'Linux命令'
date: 2021-10-31
author: Anarkh-Lee
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-banner.png'
tags: Linux













---

> 工作中用到的Linux命令合集

### 1.ping

ping是简单且重要的指令，ping主要通过ICMP封包来进行整个网络的状况报告，最简单直接的测试连通性。

**作用：**

ping用来检查网络是否通畅或者网络连接速度的指令。

**原理：**

利用网络上机器IP地址的唯一性，给目标IP地址发送一个ICMP数据包，再要求对方返回一个同样大小的ICMP数据包来确定两台网络机器是否连接相同，延迟是多少。

**注意：**

并不是ping不通就表示没有连通，有可能对方设置了禁ping，这时就需要配合其他高级一些的命令测试。

为什么有的时候要禁ping？

ping指的是端对端连通，通常用来作为可用性的检查，但是某些病毒木马会强行大量远程执行ping命令抢占你的网络资源，导致系统变慢，网络变慢。严禁ping入侵作为大多数防火墙的一个基本功能提供给用户进行选择。通常的情况下你如果不用做服务器或者进行网络测试，可以放心的选中它，保护你的电脑。

**格式：**

```cmd
ping (选项) (参数)

选项：
-d:使用Socket的SO_DEBUG功能；
-s<数据包大小>:设置数据包的大小；
-R:记录路由过程；
-v:详细显示指令的执行过程。

参数：
目的主机：指令发送ICMP报文的目的主机。
```

**使用：**

```cmd
ping 10.55.15.129
```

![](.\img\Linux\1.png)

### 2.telnet

telnet命令用于登录远程主机，对远程主机进行管理。telnet因为采用明文传送报文，安全性不好，很多Linux服务器都不开放telnet服务，而改用更安全的ssh方式。

**作用：**

telnet是用来探测指定ip是否开放指定端口。

**注意：**

telnet不通不一定代表网络不通。

**格式：**

```cmd
telnet (选项) (参数)

选项：
-a：尝试自动登入远端系统；
-b<主机别名>：使用别名指定远端主机名称；
-c：不读取用户专属目录里的.telnetrc文件；
-d：启动排错模式；
-e<脱离字符>：设置脱离字符；
-E：滤除脱离字符；
-f：此参数的效果和指定"-F"参数相同；
-F：使用Kerberos V5认证时，加上此参数可把本地主机的认证数据上传到远端主机；
-k<域名>：使用Kerberos认证时，加上此参数让远端主机采用指定的领域名，而非该主机的域名；
-K：不自动登入远端主机；
-l<用户名称>：指定要登入远端主机的用户名称；
-L：允许输出8位字符资料；
-n<记录文件>：指定文件记录相关信息；
-r：使用类似[rlogin](http://man.linuxde.net/rlogin "rlogin命令")指令的用户界面；
-S<服务类型>：设置telnet连线所需的[ip](http://man.linuxde.net/ip "ip命令") TOS信息；
-x：假设主机有支持数据加密的功能，就使用它；
-X<认证形态>：关闭指定的认证形态。

参数：
远程主机：指定要登录进行管理的远程主机；
端口：指定telnet协议使用的端口号。
```

**使用：**

```cmd
telnet www.baidu.com 80
```

以下两种情况都是通的：

![](.\img\Linux\2.png)

![](.\img\Linux\3.png)

以下情况是不通：

![](.\img\Linux\4.png)

注：`Escape character is '^]'`,“^”是Ctrl键的意思。这个提示的意思是按`Ctrl + ]`会呼出telnet的命令行。

**报错解决：**

* 报错：`-bash: telnet: command not found`

* 解决：安装telnet服务 【centos、ubuntu】安装telnet命令的方法：

  ```cmd
  yum list telnet* 列出telnet相关的安装包
  
  yum install telnet-server 安装telnet服务
  
  yum install telnet.* 安装telnet客户端
  ```

### 3.wget

wget是一个从网络上自动下载文件的自由工具，支持通过HTTP、HTTPS、FTP三个最常见的TCP/IP协议下载，并可以使用HTTP代理。wget名称的由来是“World Wide Web”与“get”的结合，它也可以用来测试端口的连通性具体用法。

**作用：**

* 下载文件
* 测试端口连通性

**格式：**

```cmd
wget ip:port

ip:测试主机的ip地址
port:测试主机的端口
```

如果远程主机不存在端口则会一直提示连接主机。

![](.\img\Linux\5.png)

如果远程主机存在端口则会看到响应的信息。

![](.\img\Linux\6.png)

**使用：**

![](.\img\Linux\7.png)

### 4.curl

在Linux中curl是一个利用URL规则在命令行下工作的文件传输工具，可以说是一款很强大的http命令行工具。它支持文件的上传和下载，是综合传输工具，但按传统，习惯称url为下载工具。这个工具可以帮助我们在服务器上很好的模拟http的行为。

**作用：**

* 上传、下载
* 模拟http请求
* 测试连通性

**格式：**

```cmd
curl url 返回整个网页的内容
curl -I url 返回这个网页的header
curl -i url 返回网页header + 内容
```

**使用：**

```cmd
curl --request POST --url http://10.55.14.162:8989/piles-message/v1/sms --header 'Content-Type: application/json' --data '{"appNumber":"nmrs","mobile":"18844544681","content":"手机验证码为641287，验证码的有效期为5分钟。若有疑问请致电12333。","extMsg":"","bizNumber":"UCA-715","bizName":"验证码发送"}'
```

成功：

![](.\img\Linux\8.png)

失败：

![](.\img\Linux\9.png)

另附一些别的curl：

* 请求没回应：

![](.\img\Linux\10.png)

* 请求回应方法有问题：

![](.\img\Linux\11.png)

### 5.nginx相关命令

* 启动：`/opt/nginx/sbin/nginx`
* 停止：`/opt/nginx/sbin/nginx -s stop`，`./nginx -s stop`
* 重启：`./nginx -s reload`     --必须是启动状态才能重启，停止状态不能重启。







<iframe type="text/html" width="100%" height="385" src="http://www.youtube.com/embed/gfmjMWjn-Xg" frameborder="0"></iframe>